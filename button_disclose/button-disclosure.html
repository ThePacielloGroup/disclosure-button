<link rel="import" href="../bower_components/polymer/polymer.html">

<polymer-element name="button-disclosure" extends="button" attributes="disclose open" on-click="{{buttonClick}}">
	<template>
		<style>
			:host div { display:inline-block;}
		</style>
		<template if={{open==false}}>►</template>
		<template if={{open==true}}>▼</template>
		<content></content>
	</template>
	<script>
		Polymer('button-disclosure', {
			ready: function() {
			},
			buttonClick: function(event, detail, sender) {
				this.open = !this.open;
			},
			openChanged: function(oldValue, newValue) {
				this.setAttribute('aria-expanded', newValue);
				this.target.hidden = !newValue;
				if (newValue) {
					this.target.style.display='block';
				} else {
					this.target.style.display='none';
				}
				this.$.arrow.classList.toggle('expanded');
			},
			discloseChanged: function(oldValue, newValue) {
				this.setAttribute('aria-controls', newValue);
				this.target = document.querySelector('#' + newValue);
				if (this.target) {
					this.open = false;
				} else {		
					console.log("Target not found '" + newValue + "'");
				}
			},
		});
	</script>
</polymer-element>